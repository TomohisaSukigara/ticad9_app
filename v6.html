<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>バイクランニングコスト比較</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: white;
    margin: 0; padding: 20px;
    text-align: center;
  }
  h1 {
    margin-bottom: 15px;
  }
  .container {
    max-width: 960px;
    margin: auto;
    background: rgba(255,255,255,0.1);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 30px rgba(0,0,0,0.5);
  }
  .flex {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    gap: 20px;
  }
  .card {
    background: rgba(255,255,255,0.15);
    padding: 15px;
    border-radius: 10px;
    flex: 1 1 320px;
  }
  label {
    display: block;
    margin-top: 12px;
    font-weight: bold;
  }
  input {
    width: 120px;
    padding: 6px;
    border-radius: 5px;
    border: none;
    text-align: right;
    font-size: 1em;
    margin-top: 4px;
  }
  #annualDistanceDisplay {
    margin-top: 8px;
    font-weight: bold;
    color: #ffc107;
  }
  .btn-group {
    margin-top: 20px;
  }
  button {
    background: #ff9800;
    border: none;
    padding: 12px 30px;
    margin: 0 8px;
    border-radius: 12px;
    font-size: 1.1em;
    color: white;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #e68a00;
  }
  canvas {
    margin-top: 25px;
    border-radius: 12px;
    background: #1e293b;
    box-shadow: 0 3px 15px rgba(0,0,0,0.6);
  }
  #referenceList {
    margin-top: 40px;
    background: rgba(255,255,255,0.15);
    border-radius: 12px;
    padding: 20px;
    max-width: 960px;
    margin-left: auto;
    margin-right: auto;
    color: white;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    text-align: left;
  }
  #referenceList h3 {
    text-align: center;
    margin-bottom: 16px;
  }
  #referenceList table {
    width: 100%;
    border-collapse: collapse;
  }
  #referenceList th, #referenceList td {
    border: 1px solid rgba(255,255,255,0.3);
    padding: 8px 12px;
  }
  #referenceList th {
    background: rgba(255,255,255,0.25);
    font-weight: 700;
  }
  #referenceList td {
    background: rgba(255,255,255,0.1);
  }
  @media(max-width: 600px) {
    #referenceList table, #referenceList thead, #referenceList tbody, #referenceList th, #referenceList td, #referenceList tr {
      display: block;
    }
    #referenceList tr {
      margin-bottom: 12px;
    }
    #referenceList td {
      text-align: right;
      padding-left: 50%;
      position: relative;
    }
    #referenceList td::before {
      content: attr(data-label);
      position: absolute;
      left: 12px;
      width: 45%;
      padding-left: 8px;
      font-weight: 600;
      text-align: left;
    }
    #referenceList th {
      display: none;
    }
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>バイクランニングコスト比較<br><small>Motorcycle Running Cost Comparison</small></h1>

<div class="container">

  <div class="flex">
    <div class="card">
      <h2>ガソリンバイク / Gasoline Bike</h2>
      <label for="gas_price">購入価格 Purchase Price ($)</label>
      <input id="gas_price" type="number" value="1000" min="0" step="1" />
      <label for="gas_efficiency">燃費 Fuel Efficiency (km/L)</label>
      <input id="gas_efficiency" type="number" value="30" min="0" step="0.1" />
      <label for="gas_fuel_price">ガソリン価格 Gas Price ($/L)</label>
      <input id="gas_fuel_price" type="number" value="1.5" min="0" step="0.01" />
      <label for="gas_maintenance">整備費 Maintenance ($/year)</label>
      <input id="gas_maintenance" type="number" value="100" min="0" step="1" />
      <label for="gas_insurance">保険費 Insurance ($/year)</label>
      <input id="gas_insurance" type="number" value="100" min="0" step="1" />
    </div>
    <div class="card">
      <h2>電動バイク / Electric Bike</h2>
      <label for="elec_price">購入価格 Purchase Price ($)</label>
      <input id="elec_price" type="number" value="1000" min="0" step="1" />
      <label for="elec_efficiency">電費 Electric Efficiency (km/kWh)</label>
      <input id="elec_efficiency" type="number" value="30" min="0" step="0.1" />
      <label for="elec_power_price">電気価格 Electric Price ($/kWh)</label>
      <input id="elec_power_price" type="number" value="0.2" min="0" step="0.01" />
      <label for="elec_maintenance">整備費 Maintenance ($/year)</label>
      <input id="elec_maintenance" type="number" value="100" min="0" step="1" />
      <label for="elec_insurance">保険費 Insurance ($/year)</label>
      <input id="elec_insurance" type="number" value="100" min="0" step="1" />
    </div>
  </div>

  <div class="card" style="margin-top:20px;">
    <h2>使用条件 / Usage Conditions</h2>
    <label for="daily_distance">1日の走行距離 Daily Distance (km)</label>
    <input id="daily_distance" type="number" value="100" min="0" step="0.1" />
    <label for="operating_days">年間稼働日数 Operating Days (days/year)</label>
    <input id="operating_days" type="number" value="250" min="0" step="1" />
    <div id="annualDistanceDisplay">年間走行距離 Annual Distance: 25,000 km</div>
  </div>

  <div class="btn-group">
    <button id="calcBtn">計算 / Calculate</button>
    <button id="resetBtn">リセット / Reset</button>
  </div>

  <canvas id="lineChart" width="900" height="350"></canvas>
  <canvas id="barChart" width="900" height="350"></canvas>

</div>

<div id="referenceList">
  <h3>アフリカ各国のガソリン価格と電気代参考リスト<br>Reference List of Gasoline and Electricity Prices in African Countries</h3>
  <table>
    <thead>
      <tr>
        <th>国 / Country</th>
        <th>ガソリン価格 ($/L)<br>Gas Price ($/L)</th>
        <th>電気価格 ($/kWh)<br>Electricity Price ($/kWh)</th>
      </tr>
    </thead>
    <tbody>
      <tr><td data-label="国 / Country">ナイジェリア Nigeria</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">1.00</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.12</td></tr>
      <tr><td data-label="国 / Country">南アフリカ South Africa</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">1.30</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.14</td></tr>
      <tr><td data-label="国 / Country">ケニア Kenya</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">1.20</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.18</td></tr>
      <tr><td data-label="国 / Country">エジプト Egypt</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">0.90</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.10</td></tr>
      <tr><td data-label="国 / Country">タンザニア Tanzania</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">1.15</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.15</td></tr>
      <tr><td data-label="国 / Country">ガーナ Ghana</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">1.10</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.13</td></tr>
      <tr><td data-label="国 / Country">モロッコ Morocco</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">1.25</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.14</td></tr>
      <tr><td data-label="国 / Country">アルジェリア Algeria</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">0.85</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.09</td></tr>
      <tr><td data-label="国 / Country">ウガンダ Uganda</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">1.05</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.16</td></tr>
      <tr><td data-label="国 / Country">エチオピア Ethiopia</td><td data-label="ガソリン価格 ($/L) Gas Price ($/L)">1.00</td><td data-label="電気価格 ($/kWh) Electricity Price ($/kWh)">0.11</td></tr>
    </tbody>
  </table>
</div>

<script>
(() => {
  const annualDistanceDisplay = document.getElementById('annualDistanceDisplay');
  const inputs = [
    'gas_price','gas_efficiency','gas_fuel_price','gas_maintenance','gas_insurance',
    'elec_price','elec_efficiency','elec_power_price','elec_maintenance','elec_insurance',
    'daily_distance','operating_days'
  ].map(id => document.getElementById(id));

  const defaults = {
    gas_price: 1000,
    gas_efficiency: 30,
    gas_fuel_price: 1.5,
    gas_maintenance: 100,
    gas_insurance: 100,
    elec_price: 1000,
    elec_efficiency: 30,  // ← 変更ここ
    elec_power_price: 0.2,
    elec_maintenance: 100,
    elec_insurance: 100,
    daily_distance: 100,
    operating_days: 250
  };

  let lineChart = null;
  let barChart = null;

  function updateAnnualDistance() {
    const daily = Number(document.getElementById('daily_distance').value) || 0;
    const days = Number(document.getElementById('operating_days').value) || 0;
    const annual = daily * days;
    annualDistanceDisplay.textContent = `年間走行距離 Annual Distance: ${annual.toLocaleString()} km`;
    return annual;
  }

  function calculate() {
    // 入力値をまとめて取得
    const vals = {};
    inputs.forEach(input => {
      vals[input.id] = Number(input.value) || 0;
    });

    const annualDist = updateAnnualDistance();

    // 燃料コスト計算
    const gasFuelCostYear = (annualDist / vals.gas_efficiency) * vals.gas_fuel_price;
    const elecFuelCostYear = (annualDist / vals.elec_efficiency) * vals.elec_power_price;

    // 年間総コスト
    const gasYearly = gasFuelCostYear + vals.gas_maintenance + vals.gas_insurance;
    const elecYearly = elecFuelCostYear + vals.elec_maintenance + vals.elec_insurance;

    // 3年間累積コスト（購入価格含む）
    const years = 3;
    const gasCumCosts = [vals.gas_price];
    const elecCumCosts = [vals.elec_price];

    for(let y=1; y<=years; y++){
      gasCumCosts.push( +(gasCumCosts[y-1] + gasYearly).toFixed(2));
      elecCumCosts.push( +(elecCumCosts[y-1] + elecYearly).toFixed(2));
    }

    // 折れ線グラフラベル
    const labelsYears = [];
    for(let i=0; i<=years; i++) {
      labelsYears.push(i + (i === 0 ? ' (初期)' : '年 / year'));
    }

    // 棒グラフ内訳
    const labelsBreakdown = ['燃料 Fuel', '整備 Maintenance', '保険 Insurance'];
    const gasBreakdown = [gasFuelCostYear, vals.gas_maintenance, vals.gas_insurance];
    const elecBreakdown = [elecFuelCostYear, vals.elec_maintenance, vals.elec_insurance];

    // 折れ線グラフ描画
    const ctxLine = document.getElementById('lineChart').getContext('2d');
    if(lineChart) lineChart.destroy();
    lineChart = new Chart(ctxLine, {
      type: 'line',
      data: {
        labels: labelsYears,
        datasets: [
          {
            label: 'ガソリンバイク Gasoline Bike',
            data: gasCumCosts,
            borderColor: '#ff5722',
            backgroundColor: 'rgba(255,87,34,0.3)',
            fill: true,
            tension: 0.25,
            pointRadius: 5,
            pointHoverRadius: 7
          },
          {
            label: '電動バイク Electric Bike',
            data: elecCumCosts,
            borderColor: '#4caf50',
            backgroundColor: 'rgba(76,175,80,0.3)',
            fill: true,
            tension: 0.25,
            pointRadius: 5,
            pointHoverRadius: 7
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { labels: { color: 'white', font: { size: 14 } } },
          tooltip: {
            callbacks: {
              label: ctx => `${ctx.dataset.label}: $${ctx.parsed.y.toLocaleString()}`
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            title: { display: true, text: 'コスト Cost ($) / 年 / year', color: 'white', font: { size: 14 } },
            ticks: { color: 'white' },
            grid: { color: 'rgba(255,255,255,0.15)' }
          },
          x: {
            ticks: { color: 'white' },
            title: { display: true, text: '経過年数 Years / 年', color: 'white', font: { size: 14 } },
            grid: { color: 'rgba(255,255,255,0.15)' }
          }
        }
      }
    });

    // 棒グラフ描画
    const ctxBar = document.getElementById('barChart').getContext('2d');
    if(barChart) barChart.destroy();
    barChart = new Chart(ctxBar, {
      type: 'bar',
      data: {
        labels: labelsBreakdown,
        datasets: [
          {
            label: 'ガソリンバイク Gasoline Bike',
            data: gasBreakdown,
            backgroundColor: '#ff5722'
          },
          {
            label: '電動バイク Electric Bike',
            data: elecBreakdown,
            backgroundColor: '#4caf50'
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { labels: { color: 'white', font: { size: 14 } } },
          tooltip: {
            callbacks: {
              label: ctx => `${ctx.dataset.label}: $${ctx.parsed.y.toLocaleString()}`
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            title: { display: true, text: '年間コスト Cost ($) / year', color: 'white', font: { size: 14 } },
            ticks: { color: 'white' },
            grid: { color: 'rgba(255,255,255,0.15)' }
          },
          x: {
            ticks: { color: 'white' },
            grid: { color: 'rgba(255,255,255,0.15)' }
          }
        }
      }
    });

  }

  function resetValues() {
    for(const key in defaults) {
      document.getElementById(key).value = defaults[key];
    }
    updateAnnualDistance();
    calculate();
  }

  // イベントリスナーセットアップ（入力変更で年間走行距離は即更新）
  ['daily_distance','operating_days'].forEach(id => {
    document.getElementById(id).addEventListener('input', () => {
      updateAnnualDistance();
    });
  });

  // 計算ボタン・リセットボタン
  document.getElementById('calcBtn').addEventListener('click', calculate);
  document.getElementById('resetBtn').addEventListener('click', resetValues);

  // ページロード時初期表示
  window.onload = () => {
    updateAnnualDistance();
    calculate();
  };

})();
</script>

</body>
</html>
